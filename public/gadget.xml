<?xml version="1.0" encoding="UTF-8" ?>
<Module>
   <ModulePrefs title="" height="400"/>
   <Content type="html"><![CDATA[
    <div id="output">
    </div>
    <style>
      .gift {
        width: 29%;
        margin: 0px 2%;
        float: left;
        border: solid 1px black;
        font-family: sans-serif;
        padding: 0px 0px 20px 0px;
      }

      .gift img {
        display: block;
        margin: 0px auto;
        width: 100%;
      }

      .gift .name {
        font-size: 24px;
        text-align: center;
      }

      .gift .details {
        margin: 0px 20px;
      }
      
    </style>
    <script type="text/javascript">

    function getGifts() {
      var data = [{"name":"gift1","source":"where to buy it","image":"http://placekitten.com/301/200","price":"$100","blurb":"some blurb thing"},{"name":"gift2","source":"where to buy it","image":"http://placekitten.com/300/201","price":"$4500","blurb":"some blurb thing"}];

      var output = (el) => document.getElementById('output').appendChild(el);

      var createElement = (el) => () => document.createElement(el);
      var div = createElement('div');
      var img = createElement('img');

      var elem = (el, className, content) => {
        el.className = className;
        if (content) {
          el.appendChild(document.createTextNode(content));
        }
        return el;
      }

      for (var i = 0; i < data.length; i++) {
        var gift = data[i];
        var container = div();
        container.className = "gift"
        var image = img();
        image.src = gift.image;
        var name = elem(div(), "name", gift.name);
        var price = elem(div(), "price", gift.price);
        var source = elem(div(), "source", gift.source);
        var blurb = elem(div(), "blurb", gift.blurb);
        
        var details = elem(div(), "details");
        
        // console.log(container, image);
        container.appendChild(image);
        container.appendChild(name);
        details.appendChild(price);
        details.appendChild(source);
        details.appendChild(blurb);
        container.appendChild(details);
        output(container);
      }     
    }

    gadgets.util.registerOnLoadHandler(getGifts);

    </script>
    ]]>
  </Content>
</Module>
